<!--Pipe--><!--{{ oportunidade | json }} -->

<div class="ui-g">
  <p-toast></p-toast>
  <p-confirmDialog header="Confirmação" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<p-panel header="Administração de Oportunidades" [style]="{width: '70%', margin: '0 auto'}">
  <div style="margin-bottom: 20px">
    <p-menubar [model]="itens"></p-menubar> 
  </div>
  <p-table [value]="oportunidades" [columns]="cols" [responsive]="true" 
           selectionMode="single" [(selection)]="selectedOportunidade" dataKey="id"
           [paginator]="true" [rows]="5">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns" [pSortableColumn]="col.field">
            {{col.header}}
            <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" 
                        ariaLabelDesc="Activate to sort in descending order" 
                        ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
          </th>          
        </tr>
      </ng-template>
    
      <ng-template pTemplate="body" let-oportunidade let-columns="columns">
        <tr [pSelectableRow]="oportunidade">
          <td *ngFor="let col of columns" >
            {{oportunidade[col.field]}}
          </td>
        
        </tr>
      </ng-template>
    </p-table>
</p-panel>
<p-dialog header="{{ oportunidade.id == null ? 'Nova Oportunidade' : 'Editar Oportunidade'}}" 
          [responsive]="true" [style]="{width: '400px'}" 
          [(visible)]="displaySaveDialog" 
          [modal]="true">
  <div class="ui-g ui-fluid">
    <div class="ui-g-12">
        <div class="ui-g-4">
            <label for="descricao">Descrição</label>
        </div>
        <div class="ui-g-8">
            <input pInputText id="descricao" [(ngModel)]="oportunidade.descricao" />
        </div>
    </div>
    <div class="ui-g-12">
        <div class="ui-g-4">
            <label for="nomeProspecto">Nome Prospecto</label>
        </div>
        <div class="ui-g-8">
            <input pInputText id="nomeProspecto" [(ngModel)]="oportunidade.nomeProspecto" />
        </div>
    </div>
    <div class="ui-g-12">
        <div class="ui-g-4">
            <label for="valor">Valor</label>
        </div>
        <div class="ui-g-8">
            <input pInputText id="valor" [(ngModel)]="oportunidade.valor" />
        </div>
    </div>
</div>
<p-footer>
  <div class="ui-dialog-buttonpane ui-helper-clearfix">
     <button type="button" pButton icon="pi pi-check" (click)="save()" label="Salvar"></button>
  </div>
</p-footer>
</p-dialog>
</div>

